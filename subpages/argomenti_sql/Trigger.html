<!DOCTYPE html>
<html lang="it">
<head>

<!-- Google Translate -->
<script type="text/javascript">
function googleTranslateElementInit() {
	new google.translate.TranslateElement({pageLanguage: 'it', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
}
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GSE1MKHYSG"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-GSE1MKHYSG');
</script>

<meta charset="utf-8"/>
<meta name="author" content="Dennis Turco"/>
<meta name="description" content="Sito web dedicato alla pubblicazione di documentazione volta a spiegare in modo chiaro e conciso i concetti fondamentali di programmazione e matematica."/>
<meta name="keywords" content="HTML, CSS, JavaScript"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/> <!--Serve per la visualizzazione da mobile-->
<title>SQL: Trigger</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"/>
<link rel="icon" href="../../images/logo/logo.png"/>  <!--Icona della pagina web-->
<link rel="stylesheet" href="../../stylesheet/bootstrap.min.css"/> <!--incorporo bootstrap-->
<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" /> <!--Script per permettere l'hover on scroll-->
<link rel="stylesheet" href="../../stylesheet/style.css"/>
<link rel="stylesheet" href="../../stylesheet/pages.css"/>
<link rel="stylesheet" href="../../stylesheet/prism.css"/>
<link rel="stylesheet" href="../../stylesheet/footer.css"/>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
</head>

<div id="prenotazione-lezione">
    <a href="https://calendar.app.google/Rjok4qYyNwfbJnja9" target="_blank" class="donate-button">
        <span class="emoji">üë®‚Äçüè´</span>
        <span class="text">Prenota una lezione</span>
    </a>
</div>

<!--navbar-->
<div class="topnav" id="myTopnav"> 
    <a href="../../index.html"><i class="fa-solid fa-home"></i> Home</a>
    <div class="dropdown">
        <button class="dropbtn"><i class="fa-solid fa-circle-chevron-down"></i></i> Materie</button>
        <div class="dropdown-content">
            <a href="../../HomeMatematica.html">Matematica</a>
            <a href="../../HomeInformatica.html">Informatica</a>
        </div>
    </div>
    <a href="../../insegnanti.html"><i class="fa-solid fa-chalkboard-user"></i> Insegnanti</a>
    <a href="mailto:dennisturco@gmail.com?subject=Programmazione Manuale"><i class="fa-solid fa-envelope"></i> Contattami</a>
    <a href="https://dennisturco.github.io/"><i class="fa-solid fa-briefcase"></i> Portfolio</a>
    <a href="javascript:void(0);" style="font-size:15px;" class="icon" onclick="myFunction()">&#9776;</a>
</div>

<!--side navbar-->
<div id="sidenavbar">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()"><i class="fa-solid fa-x"></i></a>
</div>
<div class="open_sidebar">
    <a href="javascript:void(0)" class="openbtn" onclick="openNav()"><i class="fa-solid fa-bars"></i></a>
</div>

<button onclick="topFunction()" id="myBtn" title="Go to top"><i class="material-icons">north</i></button> <!--Torna su-->


<script src="https://cdn.jsdelivr.net/npm/showdown/dist/showdown.min.js"></script>
<div id="mycontent"></div>


<!--trigger -->
<article id="4fc157d2-7b3e-42f8-945e-767c5ce46dce" class="page sans"><header><h1 class="page-title">SQL: Trigger</h1><p class="page-description"></p></header><div class="page-body"><nav id="fcc26881-1133-4cee-a857-867dc9294447" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#ad53797a-8922-4adb-80b6-a8ad429914c0"><mark class="highlight-blue">0Ô∏è‚É£ Link utili</mark></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#4d956ecb-09fe-4666-94bc-69253acf66c4"><mark class="highlight-blue">1Ô∏è‚É£ Cosa sono?</mark></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#345371ce-3615-4e3d-9f05-d604f0bdf949"><mark class="highlight-blue">2Ô∏è‚É£ A cosa servono?</mark></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#d03337db-2450-4f4c-b432-4c84385bdc30"><mark class="highlight-blue">4Ô∏è‚É£ Sintassi</mark></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#e32c8626-93f6-4ecc-83b5-7e214034208f">üìù <mark class="highlight-blue">Esempi</mark></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#59d3011e-b884-4f52-bee2-eb4ccde38534"><mark class="highlight-brown">Esempio 1</mark></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#bf624269-f062-403d-bfba-11508529fdd8"><mark class="highlight-brown">Esempio 2</mark></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#fb499df1-9178-4f87-97bb-537ad3ea30cd"><mark class="highlight-brown">Esempio 3</mark></a></div></nav><h1 id="ad53797a-8922-4adb-80b6-a8ad429914c0" class=""><mark class="highlight-blue">0Ô∏è‚É£ Link utili</mark></h1><figure id="9cf4151d-5dc6-4e33-b33c-a98b7e3078b6"><a href="https://it.wikipedia.org/wiki/Trigger_(basi_di_dati)" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Trigger (basi di dati)</div><div class="bookmark-description">Il trigger, nelle basi di dati, √® una procedura che viene eseguita in maniera automatica in coincidenza di un determinato evento, come ad esempio la cancellazione di un record di una tabella. In questo modo si ha a disposizione una tecnica per specificare e mantenere vincoli di integrit√† anche complessi. I trigger permettono agli utenti di specificare vincoli di integrit√† pi√π complessi dato che un trigger √® essenzialmente una procedura PL/SQL (Oracle),&amp;#91;1&amp;#93; Transact-SQL (Microsoft),&amp;#91;2&amp;#93; PL/pgSQL (PostgreSQL),&amp;#91;3&amp;#93; ecc.</div></div><div class="bookmark-href"><img src="https://it.wikipedia.org/static/apple-touch/wikipedia.png" class="icon bookmark-icon"/>https://it.wikipedia.org/wiki/Trigger_(basi_di_dati)</div></div></a></figure><figure id="a2d34b70-e823-4cef-8b59-3545ab54608f"><a href="https://www.mssqltips.com/sqlservertip/5909/sql-server-trigger-example/" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">SQL Server Trigger Example</div><div class="bookmark-description">Learn about SQL Server triggers, their use and how to create a simple trigger to track data changes in a table.</div></div><div class="bookmark-href"><img src="https://www.mssqltips.com/favicon.ico" class="icon bookmark-icon"/>https://www.mssqltips.com/sqlservertip/5909/sql-server-trigger-example/</div></div><img src="https://www.mssqltips.com/images_newsletter/5909_NewsletterImage.png" class="bookmark-image"/></a></figure><figure id="9d1ac8ba-6d94-4314-a887-65e344428790"><a href="https://learn.microsoft.com/it-it/sql/t-sql/statements/create-trigger-transact-sql?view=sql-server-ver16" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">CREATE TRIGGER (Transact-SQL) - SQL Server</div><div class="bookmark-description">Informazioni di riferimento Transact-SQL per l&#x27;istruzione CREATE TRIGGER, usata per creare un trigger DML, DDL o LOGON.</div></div><div class="bookmark-href"><img src="https://learn.microsoft.com/favicon.ico" class="icon bookmark-icon"/>https://learn.microsoft.com/it-it/sql/t-sql/statements/create-trigger-transact-sql?view=sql-server-ver16</div></div><img src="https://learn.microsoft.com/en-us/media/logos/logo-ms-social.png" class="bookmark-image"/></a></figure><h1 id="4d956ecb-09fe-4666-94bc-69253acf66c4" class=""><mark class="highlight-blue">1Ô∏è‚É£ Cosa sono?</mark></h1><p id="599b8c98-5bab-4116-af87-e35f4119d0ac" class="">I <mark class="highlight-teal"><strong>trigger </strong></mark>sono delle procedure che vengono eseguite quando si verifica un evento nel database, in maniera automatica.</p><p id="1ab6e77d-0622-47fc-91c0-f301c34c2ad0" class="">I trigger permettono agli utenti di specificare vincoli di integrit√† pi√π complessi.</p><p id="2ed991e2-5da8-4bdc-bad1-c002ca054c4a" class="">I trigger, in particolare, vengono eseguiti quando un utente esegue un operazione di:</p><ul id="244f6aff-9a2e-4765-b65a-edccad8c4adf" class="bulleted-list"><li style="list-style-type:disc"><code>INSERT</code></li></ul><ul id="2b937854-6f03-43ef-84ce-a514deaca439" class="bulleted-list"><li style="list-style-type:disc"><code>UPDATE</code></li></ul><ul id="e617fdf6-4d1c-47b1-96c6-9d737c7cbeae" class="bulleted-list"><li style="list-style-type:disc"><code>DELETE</code></li></ul><p id="aaa7fe19-81c5-4873-b84b-5542ef6aef47" class="">I trigger vengono eseguiti quando si verifica un evento valido, altrimenti vengono ‚Äúignorati‚Äù.</p><h1 id="345371ce-3615-4e3d-9f05-d604f0bdf949" class=""><mark class="highlight-blue">2Ô∏è‚É£ A cosa servono?</mark></h1><p id="26662e47-b519-4cf0-96e2-aa3eef2c5342" class="">I trigger possono servire per diversi scopi:</p><ol type="1" id="625e444f-c4b0-434f-b703-51ff7ac26098" class="numbered-list" start="1"><li>per mantenere¬†<strong>l&#x27;integrit√† referenziale¬†</strong>tra le varie tabelle</li></ol><ol type="1" id="1eeef426-cb88-403b-bc69-b261a6462785" class="numbered-list" start="2"><li>per mantenere¬†<strong>l&#x27;integrit√† dei dati¬†</strong>della singola tabella</li></ol><ol type="1" id="28c6a4b3-6c4b-46bb-8bc8-1cb89f498f11" class="numbered-list" start="3"><li>per¬†<strong>monitorare</strong>¬†i campi di una tabella ed eventualmente generare eventi ad hoc</li></ol><ol type="1" id="6fa38b3e-8b0b-40ef-85ee-0eadbb40e174" class="numbered-list" start="4"><li>per creare¬†<strong>tabelle di auditing¬†</strong>per i record che che vengono modificati o eliminati</li></ol><h1 id="d03337db-2450-4f4c-b432-4c84385bdc30" class=""><mark class="highlight-blue">4Ô∏è‚É£ Sintassi</mark></h1><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="112093f0-8b7f-46d3-9b13-882b67b08efe" class="code"><code class="language-SQL">CREATE TRIGGER trigger_name
ON { Table name or view name }   
[ WITH &lt;Options&gt; ]  
{ FOR | AFTER | INSTEAD OF }   
{ [INSERT], [UPDATE] , [DELETE] }</code></pre><ul id="327cfe41-f329-44dc-8161-1f6c60b9d1d7" class="bulleted-list"><li style="list-style-type:disc">nome trigger:<p id="49384706-cb27-4da5-9ea2-3ce348bd6ec9" class=""><code>CREATE [OR REPLACE] TRIGGER &lt;nome trigger&gt;</code></p></li></ul><ul id="7473eeaf-d78c-41ae-b5b7-c2e95a0ca935" class="bulleted-list"><li style="list-style-type:disc">collocazione temporale del trigger:<p id="750efc54-c6c1-44c9-8f9f-28b7cc25bb55" class=""><code>BEFORE | AFTER | INSTEAD OF</code></p></li></ul><ul id="c14a6b0a-4fcb-4f75-9c43-35afba954861" class="bulleted-list"><li style="list-style-type:disc">azione(i) del trigger:<p id="07d97bcd-56f7-4987-be08-e5f0af4456d3" class=""><code>INSERT OR UPDATE [OF &lt;colonna(e)&gt;] OR DELETE ON &lt;tabella&gt;</code></p></li></ul><ul id="beb9f343-5e67-4fea-887d-7aa65dde0c00" class="bulleted-list"><li style="list-style-type:disc">tipo di trigger (opzionale):<p id="4ba9bc65-6b82-4c2d-8410-7677cd8ce78d" class=""><code>FOR EACH ROW</code></p></li></ul><ul id="db9cf80e-5368-4d94-9acc-3d44e99e6a88" class="bulleted-list"><li style="list-style-type:disc">restrizioni trigger (solo per triggers for each row):<p id="02baf704-01b2-430e-b5e4-7241ec05b744" class=""><code>WHEN (&lt;condizione&gt;)</code></p></li></ul><ul id="7a56c752-cf38-44f0-9659-bab129888825" class="bulleted-list"><li style="list-style-type:disc">corpo del trigger:<p id="4fe46924-e393-416f-8696-94f6a5472dda" class=""><code>&lt;blocco PL/SQL&gt;</code></p></li></ul><h1 id="e32c8626-93f6-4ecc-83b5-7e214034208f" class="">üìù <mark class="highlight-blue">Esempi</mark></h1><p id="78af06ee-52b3-4dc6-a96a-4c40fc4fc9c8" class="">per gli esempi sottostanti prendiamo in considerazione la seguente tabella:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="20a6194c-87ab-4895-8b9c-6e1e0d3ce315" class="code"><code class="language-SQL">CREATE TABLE Student(
		studentID INT NOT NULL AUTO_INCREMENT,
		FName VARCHAR(20),
		LName VARCHAR(20),
		Address VARCHAR(30),
		City VARCHAR(15),
		Marks INT,
		PRIMARY KEY(studentID)
);</code></pre><h2 id="59d3011e-b884-4f52-bee2-eb4ccde38534" class=""><mark class="highlight-brown">Esempio 1</mark></h2><p id="e4ab57cd-6861-46ba-b012-69b41ea9a5b9" class="">Nel trigger sottostante, stiamo cercando di calcolare la percentuale dello studente non appena i suoi dettagli vengono aggiornati al database.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="ecc48df5-7f04-40e7-b881-c26378f2aaf4" class="code"><code class="language-SQL">CREATE TRIGGER sample_trigger
before INSERT
ON student
FOR EACH ROW
SET new.total = new.marks/6;</code></pre><h2 id="bf624269-f062-403d-bfba-11508529fdd8" class=""><mark class="highlight-brown">Esempio 2</mark></h2><p id="fd85275d-1aed-4043-8864-a2bd78b96207" class="">Qui quando inseriamo i dati nella tabella studente automaticamente il trigger verr√† invocato. Il trigger aggiunger√† 100 alla colonna marks nella colonna student.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="807d6d0d-b171-407c-a43b-269c62d373a6" class="code"><code class="language-SQL">CREATE TRIGGER calculate
before INSERT 
ON student
FOR EACH ROW
SET new.marks = new.marks+100;</code></pre><h2 id="fb499df1-9178-4f87-97bb-537ad3ea30cd" class=""><mark class="highlight-brown">Esempio 3</mark></h2><p id="82cde8a5-12ad-43fb-924f-c7f27bc19e86" class="">inanzitutto creiamo una seconda tabella per questo specifico esempio:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="42dbbfe6-19bd-413a-b56a-710478209890" class="code"><code class="language-SQL">create table Final_mark(
per int );</code></pre><p id="cd421701-5f9d-4990-9089-990f33cf47dd" class="">Quando inseriamo i dati nella tabella, il trigger total mark memorizza il risultato nella tabella Final_mark.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="cab9ae29-f75a-42f8-8242-1e90ac1b3210" class="code"><code class="language-SQL">CREATE TRIGGER total_mark
after INSERT
ON student
FOR EACH ROW
insert into Final_mark values(new.marks);</code></pre><p id="76b8c98e-1eb0-499a-9cfe-33012aac0138" class="">
</p></div></article>


<div id="footer-container">
    <footer class="footer">
        <div class="colonna1">
            <div class="logofooter">
                <a href="https://dennisturco.github.io/ImparareFacile/">
                    <img align="left" src="../../images/logo/logo.png" alt="site logo">
                </a><br><br>
                <b align="center">&copy; 2022 - 2024 Dennis Turco</b>
                <hr align="center"><br>
                <p align=" center">HAI VISUALIZZATO QUESTO SITO<br><div class="website-counter" noIcon="true"></div></p>       
            </div>
        </div>
        <div class="colonna2">
            <div class="contatti_footer">
                <b>CONTATTI</b><br>
                <a href="https://discordapp.com/invite/9Jb4Gt3HhB" id="discord_link" target="_blank">
                    <img src="../../images/logo/discord.png" alt="discord server">
                </a>
                <a href="https://www.linkedin.com/in/dennis-turco-751239232/" id="linkedin_link" target="_blank">
                    <img src="../../images/logo//l3.png" alt="linkedin_profile">
                </a>
                <a href="https://github.com/DennisTurco" id="github_link" target="_blank">
                    <img src="../../images/logo//github.png" alt="github_profile">
                </a>
                <a href="mailto:dennisturco@gmail.com" id="email" target="_blank">
                    <img src="../../images/logo//mail.png" alt="mail">
                </a>
            </div>
        </div>
    </footer>
</div>

<!--Script per permettere l'hover on scroll-->
<script type="text/JavaScript" src="../../javascript.js"></script>
<script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<!--Scroll Down Script-->
<script>
	AOS.init();
</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
<script>
</script>

<!-- Script for syntax highlight -->
<script src="../../prism.js"></script>

<script src="../../navbar.js"></script>

</body>
</html>